{"version":3,"sources":["../src/vim.js"],"names":["Plugin","editor","activateMode","event","_opt","logger","debug","mode","cm","getCodeMirror","getWrapperElement","classList","remove","add","keyName","key","vim","maybeInitVimState","isNumberic","match","isBufferingKey","keyBinding","inkdrop","keymaps","findKeyBindings","keystrokes","target","getInputField","b","webkitMatchesSelector","inputState","hasOperatorOrMotion","motion","operator","length","selectedCharacter","keyBuffer","pendingCommand","stopBufferingKey","stopPropagation","preventDefault","bufferKey","pushRepeatDigit","isInsertMode","keys","keysMatcher","exec","_event","yankClipboard","activate","CodeMirror","isEditorActive","getActiveEditor","onEditorLoad","handleEditorLoad","deactivate","disposables","dispose","deactivateMode","originalKeyMap","getOption","setOption","on","handleVimModeChange","handleFocusEditor","el","registerCommands","registerExCommands","off","startBufferingKey","command","wrapper","undefined","contains","vimKey","cmKeyToVimKey","CompositeDisposable","doKeyToKey","toKeys","substring","index","handleEditorKeyDown","KeyboardEvent","exactMatchCandidates","findMatchCandidates","bindings","findExactMatches","document","activeElement","commands","dispatch","h","e","Object","assign","state","operation","curOp","isVimOp","type","commandDispatcher","processCommand","Vim","suppressErrorLogging","console","error","originalEvent","p","visualMode","log","handlers","clearInputState","exitVisualMode","exitInsertMode","motionArgs","forward","linewise","wordEnd","bigWord","inclusive","toJumplist","toFirstChar","repeatOffset","explicitRepeat","action","actionArgs","position","context","isEdit","insertAt","textObjectInner","operatorArgs","indentRight","after","toLower","shouldMoveCursor","searchArgs","querySrc","wholeWordOnly","replace","blockwise","interlaceInsertRepeat","operatorMotionArgs","visualLine","increase","backtrack","sameLine","addEventListener","Disposable","removeEventListener","defineEx","getVimGlobalState","text","clipboard","readText","indexOf","registerController","pushText","module","exports"],"mappings":"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","sourcesContent":["import { logger } from 'inkdrop'\nimport vimKeymap from './keymap'\nimport { CompositeDisposable, Disposable } from 'event-kit'\nimport CodeMirror from 'codemirror'\nimport { clipboard } from 'electron'\n\nclass Plugin {\n  activate() {\n    this.vim = vimKeymap(CodeMirror)\n    if (inkdrop.isEditorActive()) {\n      this.activateMode(inkdrop.getActiveEditor())\n    }\n    inkdrop.onEditorLoad(this.handleEditorLoad)\n  }\n\n  deactivate() {\n    if (this.disposables) {\n      this.disposables.dispose()\n    }\n    if (inkdrop.isEditorActive()) {\n      this.deactivateMode(inkdrop.getActiveEditor())\n    }\n  }\n\n  activateMode(editor) {\n    const { cm } = editor\n    this.originalKeyMap = cm.getOption('keyMap')\n    cm.setOption('keyMap', 'vim')\n    cm.on('vim-mode-change', this.handleVimModeChange)\n    cm.on('focus', this.handleFocusEditor)\n\n    const el = cm.getWrapperElement()\n    el.classList.add('vim-mode', 'normal-mode')\n\n    this.registerCommands()\n    this.registerExCommands()\n  }\n\n  deactivateMode(editor) {\n    const { cm } = editor\n    if (cm && this.originalKeyMap) {\n      cm.setOption('keyMap', this.originalKeyMap)\n      cm.off('vim-mode-change', this.handleVimModeChange)\n      const el = cm.getWrapperElement()\n      el.classList.remove('vim-mode')\n    }\n  }\n\n  startBufferingKey(command) {\n    const wrapper = this.getCodeMirror().getWrapperElement()\n    logger.debug('Start key buffering')\n    wrapper.classList.add('key-buffering')\n    this.pendingCommand = command\n  }\n\n  stopBufferingKey() {\n    const wrapper = this.getCodeMirror().getWrapperElement()\n    wrapper.classList.remove('key-buffering')\n    this.pendingCommand = undefined\n  }\n\n  isBufferingKey() {\n    const wrapper = this.getCodeMirror().getWrapperElement()\n    return wrapper.classList.contains('key-buffering')\n  }\n\n  bufferKey(key) {\n    const cm = this.getCodeMirror()\n    const vim = this.vim.maybeInitVimState(cm)\n    const vimKey = this.vim.cmKeyToVimKey(\"'\" + key + \"'\")\n    vim.inputState.keyBuffer = vim.inputState.keyBuffer + vimKey\n    logger.debug('keyBuffer:', vim.inputState.keyBuffer, vim.inputState)\n  }\n\n  isInsertMode() {\n    const wrapper = this.getCodeMirror().getWrapperElement()\n    return wrapper.classList.contains('insert-mode')\n  }\n\n  registerCommands() {\n    const disposables = new CompositeDisposable()\n    const editor = inkdrop.getActiveEditor()\n    const { cm } = editor\n    const wrapper = cm.getWrapperElement()\n\n    const doKeyToKey = async command => {\n      logger.debug('doKeyToKey:', command)\n      let keys = command.toKeys\n      while (keys) {\n        // Pull off one command key, which is either a single character\n        // or a special sequence wrapped in '<' and '>', e.g. '<Space>'.\n        const match = /<\\w+-.+?>|<\\w+>|./.exec(keys)\n        let key = match[0]\n        logger.debug('key:', key)\n        keys = keys.substring(match.index + key.length)\n\n        if (this.isBufferingKey()) {\n          this.handleEditorKeyDown(new KeyboardEvent('keydown', { key }))\n        } else {\n          if (key.match(/^[A-Z]$/)) {\n            key = 'shift-' + key\n          }\n          const { exactMatchCandidates } = inkdrop.keymaps.findMatchCandidates([\n            key\n          ])\n          logger.debug('exactMatchCandidates:', exactMatchCandidates)\n          const bindings = inkdrop.keymaps.findExactMatches(\n            exactMatchCandidates,\n            document.activeElement\n          )\n          const b = bindings[0]\n          if (b) {\n            inkdrop.commands.dispatch(document.activeElement, b.command)\n          } else {\n            logger.debug('command not found for key:', key)\n          }\n        }\n      }\n    }\n\n    // bind key to command\n    const h = command => {\n      return e => {\n        logger.debug(\n          'command:',\n          command,\n          'state:',\n          Object.assign({}, cm.state.vim.inputState)\n        )\n        e.stopPropagation()\n        const vim = this.vim.maybeInitVimState(cm)\n        return cm.operation(() => {\n          cm.curOp.isVimOp = true\n          try {\n            if (command.type === 'keyToKey') {\n              doKeyToKey(command)\n            } else {\n              this.vim.commandDispatcher.processCommand(cm, vim, command)\n            }\n          } catch (e) {\n            // clear VIM state in case it's in a bad state.\n            cm.state.vim = undefined\n            this.vim.maybeInitVimState(cm)\n            if (!CodeMirror.Vim.suppressErrorLogging) {\n              console.error(e)\n            }\n            throw e\n          }\n          return true\n        })\n      }\n    }\n    // bind keystroke to command\n    const b = command => {\n      return e => {\n        logger.debug(\n          'buffer command:',\n          command,\n          'state:',\n          Object.assign({}, cm.state.vim.inputState),\n          e.originalEvent\n        )\n        this.startBufferingKey(h(command))\n        this.bufferKey(e.originalEvent.key)\n      }\n    }\n    // bind operator to command\n    const p = command => {\n      return e => {\n        logger.debug(\n          'operator command:',\n          command,\n          'state:',\n          Object.assign({}, cm.state.vim.inputState),\n          e.originalEvent,\n          e\n        )\n        const vim = this.vim.maybeInitVimState(cm)\n        if (\n          !vim.inputState.operator &&\n          !this.isBufferingKey() &&\n          !vim.visualMode\n        ) {\n          this.startBufferingKey(e => {\n            const el = cm.getInputField()\n            const keyBinding = inkdrop.keymaps.findKeyBindings({\n              keystrokes: e.key,\n              target: el\n            })\n            if (keyBinding.length > 0) {\n              inkdrop.commands.dispatch(el, keyBinding[0].command)\n            }\n          })\n          if (e.originalEvent) {\n            this.bufferKey(e.originalEvent.key)\n          } else {\n            console.log('buffer key:', command.keys)\n            this.bufferKey(command.keys)\n          }\n        }\n        return h(command)(e)\n      }\n    }\n    const handlers = {\n      'vim-mode:native!': () => {},\n      'vim-mode:reset-normal-mode': e => {\n        CodeMirror.Vim.clearInputState(cm)\n        this.stopBufferingKey()\n        e.stopPropagation()\n      },\n      'vim-mode:exit-visual-mode': e => {\n        logger.debug('exit-visual-mode')\n        CodeMirror.Vim.clearInputState(cm)\n        CodeMirror.Vim.exitVisualMode(cm)\n        this.stopBufferingKey()\n        e.stopPropagation()\n      },\n      'vim-mode:exit-insert-mode': e => {\n        logger.debug('exit-insert-mode')\n        CodeMirror.Vim.clearInputState(cm)\n        CodeMirror.Vim.exitInsertMode(cm)\n        this.stopBufferingKey()\n        e.stopPropagation()\n      },\n      'vim-mode:move-left': h({\n        keys: 'h',\n        type: 'motion',\n        motion: 'moveByCharacters',\n        motionArgs: { forward: false }\n      }),\n      'vim-mode:move-right': h({\n        keys: 'l',\n        type: 'motion',\n        motion: 'moveByCharacters',\n        motionArgs: { forward: true }\n      }),\n      'vim-mode:move-up': h({\n        keys: 'k',\n        type: 'motion',\n        motion: 'moveByLines',\n        motionArgs: { forward: false, linewise: true }\n      }),\n      'vim-mode:move-down': h({\n        keys: 'j',\n        type: 'motion',\n        motion: 'moveByLines',\n        motionArgs: { forward: true, linewise: true }\n      }),\n\n      'vim-mode:move-to-next-word': h({\n        keys: 'w',\n        type: 'motion',\n        motion: 'moveByWords',\n        motionArgs: { forward: true, wordEnd: false }\n      }),\n      'vim-mode:move-to-next-whole-word': h({\n        keys: 'W',\n        type: 'motion',\n        motion: 'moveByWords',\n        motionArgs: { forward: true, wordEnd: false, bigWord: true }\n      }),\n      'vim-mode:move-to-end-of-word': h({\n        keys: 'e',\n        type: 'motion',\n        motion: 'moveByWords',\n        motionArgs: { forward: true, wordEnd: true, inclusive: true }\n      }),\n      'vim-mode:move-to-previous-end-of-word': h({\n        keys: 'ge',\n        type: 'motion',\n        motion: 'moveByWords',\n        motionArgs: { forward: false, wordEnd: true, inclusive: true }\n      }),\n      'vim-mode:move-to-end-of-whole-word': h({\n        keys: 'E',\n        type: 'motion',\n        motion: 'moveByWords',\n        motionArgs: {\n          forward: true,\n          wordEnd: true,\n          bigWord: true,\n          inclusive: true\n        }\n      }),\n      'vim-mode:move-to-previous-end-of-whole-word': h({\n        keys: 'gE',\n        type: 'motion',\n        motion: 'moveByWords',\n        motionArgs: {\n          forward: false,\n          wordEnd: true,\n          bigWord: true,\n          inclusive: true\n        }\n      }),\n      'vim-mode:move-to-previous-word': h({\n        keys: 'b',\n        type: 'motion',\n        motion: 'moveByWords',\n        motionArgs: { forward: false, wordEnd: false }\n      }),\n      'vim-mode:move-to-previous-whole-word': h({\n        keys: 'B',\n        type: 'motion',\n        motion: 'moveByWords',\n        motionArgs: { forward: false, wordEnd: false, bigWord: true }\n      }),\n      'vim-mode:move-to-next-paragraph': h({\n        keys: '}',\n        type: 'motion',\n        motion: 'moveByParagraph',\n        motionArgs: { forward: true, toJumplist: true }\n      }),\n      'vim-mode:move-to-previous-paragraph': h({\n        keys: '{',\n        type: 'motion',\n        motion: 'moveByParagraph',\n        motionArgs: { forward: false, toJumplist: true }\n      }),\n      'vim-mode:move-to-beginning-of-line': h({\n        keys: '0',\n        type: 'motion',\n        motion: 'moveToStartOfLine'\n      }),\n      'vim-mode:move-to-first-character-of-line': h({\n        keys: '^',\n        type: 'motion',\n        motion: 'moveToFirstNonWhiteSpaceCharacter'\n      }),\n      'vim-mode:move-to-first-character-of-line-and-down': h({\n        keys: '_',\n        type: 'motion',\n        motion: 'moveByLines',\n        motionArgs: { forward: true, toFirstChar: true, repeatOffset: -1 }\n      }),\n      'vim-mode:move-to-last-character-of-line': h({\n        keys: '$',\n        type: 'motion',\n        motion: 'moveToEol',\n        motionArgs: { inclusive: true }\n      }),\n      'vim-mode:move-to-last-nonblank-character-of-line-and-down': () => {\n        '???'\n      },\n      'vim-mode:move-to-first-character-of-line-up': h({\n        keys: '-',\n        type: 'motion',\n        motion: 'moveByLines',\n        motionArgs: { forward: false, toFirstChar: true }\n      }),\n      'vim-mode:move-to-first-character-of-line-down': h({\n        keys: '+',\n        type: 'motion',\n        motion: 'moveByLines',\n        motionArgs: { forward: true, toFirstChar: true }\n      }),\n\n      'vim-mode:move-to-start-of-file': h({\n        keys: 'gg',\n        type: 'motion',\n        motion: 'moveToLineOrEdgeOfDocument',\n        motionArgs: {\n          forward: false,\n          explicitRepeat: true,\n          linewise: true,\n          toJumplist: true\n        }\n      }),\n      'vim-mode:scroll-half-screen-up': h({\n        keys: '<C-u>',\n        type: 'motion',\n        motion: 'moveByScroll',\n        motionArgs: { forward: false, explicitRepeat: true }\n      }),\n      'vim-mode:scroll-full-screen-up': h({\n        keys: '<C-b>',\n        type: 'motion',\n        motion: 'moveByPage',\n        motionArgs: { forward: false }\n      }),\n      'vim-mode:scroll-half-screen-down': h({\n        keys: '<C-d>',\n        type: 'motion',\n        motion: 'moveByScroll',\n        motionArgs: { forward: true, explicitRepeat: true }\n      }),\n      'vim-mode:scroll-full-screen-down': h({\n        keys: '<C-f>',\n        type: 'motion',\n        motion: 'moveByPage',\n        motionArgs: { forward: true }\n      }),\n      'vim-mode:scroll-down': h({\n        keys: '<C-e>',\n        type: 'action',\n        action: 'scroll',\n        actionArgs: { forward: true, linewise: true }\n      }),\n      'vim-mode:scroll-up': h({\n        keys: '<C-y>',\n        type: 'action',\n        action: 'scroll',\n        actionArgs: { forward: false, linewise: true }\n      }),\n      'vim-mode:scroll-cursor-to-top': h({\n        keys: 'z<CR>',\n        type: 'action',\n        action: 'scrollToCursor',\n        actionArgs: { position: 'top' },\n        motion: 'moveToFirstNonWhiteSpaceCharacter'\n      }),\n      'vim-mode:scroll-cursor-to-top-leave': h({\n        keys: 'zt',\n        type: 'action',\n        action: 'scrollToCursor',\n        actionArgs: { position: 'top' }\n      }),\n      'vim-mode:scroll-cursor-to-middle': h({\n        keys: 'z.',\n        type: 'action',\n        action: 'scrollToCursor',\n        actionArgs: { position: 'center' },\n        motion: 'moveToFirstNonWhiteSpaceCharacter'\n      }),\n      'vim-mode:scroll-cursor-to-middle-leave': h({\n        keys: 'zz',\n        type: 'action',\n        action: 'scrollToCursor',\n        actionArgs: { position: 'center' }\n      }),\n      'vim-mode:scroll-cursor-to-bottom': h({\n        keys: 'z-',\n        type: 'action',\n        action: 'scrollToCursor',\n        actionArgs: { position: 'bottom' }\n      }),\n      'vim-mode:scroll-cursor-to-bottom-leave': h({\n        keys: 'zb',\n        type: 'action',\n        action: 'scrollToCursor',\n        actionArgs: { position: 'bottom' },\n        motion: 'moveToFirstNonWhiteSpaceCharacter'\n      }),\n      'vim-mode:move-to-line': h({\n        keys: 'G',\n        type: 'motion',\n        motion: 'moveToLineOrEdgeOfDocument',\n        motionArgs: {\n          forward: true,\n          explicitRepeat: true,\n          linewise: true,\n          toJumplist: true\n        }\n      }),\n      'vim-mode:move-to-top-of-screen': h({\n        keys: 'H',\n        type: 'motion',\n        motion: 'moveToTopLine',\n        motionArgs: { linewise: true, toJumplist: true }\n      }),\n      'vim-mode:move-to-bottom-of-screen': h({\n        keys: 'L',\n        type: 'motion',\n        motion: 'moveToBottomLine',\n        motionArgs: { linewise: true, toJumplist: true }\n      }),\n      'vim-mode:move-to-middle-of-screen': h({\n        keys: 'M',\n        type: 'motion',\n        motion: 'moveToMiddleLine',\n        motionArgs: { linewise: true, toJumplist: true }\n      }),\n\n      'vim-mode:delete': p({ keys: 'd', type: 'operator', operator: 'delete' }),\n      'vim-mode:delete-to-last-character-of-line': p({\n        keys: 'D',\n        type: 'operatorMotion',\n        operator: 'delete',\n        motion: 'moveToEol',\n        motionArgs: { inclusive: true },\n        context: 'normal'\n      }),\n      'vim-mode:change': p({ keys: 'c', type: 'operator', operator: 'change' }),\n      'vim-mode:change-to-last-character-of-line': p({\n        keys: 'C',\n        type: 'operatorMotion',\n        operator: 'change',\n        motion: 'moveToEol',\n        motionArgs: { inclusive: true },\n        context: 'normal'\n      }),\n      'vim-mode:substitute-line': h({\n        keys: 'S',\n        type: 'keyToKey',\n        toKeys: 'cc',\n        context: 'normal'\n      }),\n      'vim-mode:substitute-line-visual': h({\n        keys: 'S',\n        type: 'keyToKey',\n        toKeys: 'VdO',\n        context: 'visual'\n      }),\n      'vim-mode:replace': b({\n        keys: 'r<character>',\n        type: 'action',\n        action: 'replace',\n        isEdit: true\n      }),\n      'vim-mode:insert-at-beginning-of-line': h({\n        keys: 'I',\n        type: 'action',\n        action: 'enterInsertMode',\n        isEdit: true,\n        actionArgs: { insertAt: 'firstNonBlank' },\n        context: 'normal'\n      }),\n      'vim-mode:text-object-manipulation-inner': b({\n        keys: 'i<character>',\n        type: 'motion',\n        motion: 'textObjectManipulation',\n        motionArgs: { textObjectInner: true }\n      }),\n      'vim-mode:text-object-manipulation': b({\n        keys: 'a<character>',\n        type: 'motion',\n        motion: 'textObjectManipulation'\n      }),\n      'vim-mode:indent': p({\n        keys: '>',\n        type: 'operator',\n        operator: 'indent',\n        operatorArgs: { indentRight: true }\n      }),\n      'vim-mode:outdent': p({\n        keys: '<',\n        type: 'operator',\n        operator: 'indent',\n        operatorArgs: { indentRight: false }\n      }),\n      'vim-mode:auto-indent': () => {\n        'not supported'\n      },\n      'vim-mode:join': h({\n        keys: 'J',\n        type: 'action',\n        action: 'joinLines',\n        isEdit: true\n      }),\n\n      'vim-mode:yank': p({ keys: 'y', type: 'operator', operator: 'yank' }),\n      'vim-mode:yank-line': h({\n        keys: 'Y',\n        type: 'operatorMotion',\n        operator: 'yank',\n        motion: 'expandToLine',\n        motionArgs: { linewise: true },\n        context: 'normal'\n      }),\n      'vim-mode:put-before': h({\n        keys: 'P',\n        type: 'action',\n        action: 'paste',\n        isEdit: true,\n        actionArgs: { after: false, isEdit: true }\n      }),\n      'vim-mode:put-after': h({\n        keys: 'p',\n        type: 'action',\n        action: 'paste',\n        isEdit: true,\n        actionArgs: { after: true, isEdit: true }\n      }),\n\n      'vim-mode:toggle-case': h({\n        keys: 'g~',\n        type: 'operator',\n        operator: 'changeCase'\n      }),\n      'vim-mode:upper-case': h({\n        keys: 'gU',\n        type: 'operator',\n        operator: 'changeCase',\n        operatorArgs: { toLower: false },\n        isEdit: true\n      }),\n      'vim-mode:lower-case': h({\n        keys: 'gu',\n        type: 'operator',\n        operator: 'changeCase',\n        operatorArgs: { toLower: true },\n        isEdit: true\n      }),\n      'vim-mode:toggle-case-now': h({\n        keys: '~',\n        type: 'operatorMotion',\n        operator: 'changeCase',\n        motion: 'moveByCharacters',\n        motionArgs: { forward: true },\n        operatorArgs: { shouldMoveCursor: true },\n        context: 'normal'\n      }),\n\n      'vim-mode:mark': b({\n        keys: 'm<character>',\n        type: 'action',\n        action: 'setMark'\n      }),\n      'vim-mode:move-to-mark-literal': b({\n        keys: '`<character>',\n        type: 'motion',\n        motion: 'goToMark',\n        motionArgs: { toJumplist: true }\n      }),\n      'vim-mode:move-to-mark': b({\n        keys: \"'<character>\",\n        type: 'motion',\n        motion: 'goToMark',\n        motionArgs: { toJumplist: true, linewise: true }\n      }),\n\n      'vim-mode:find': b({\n        keys: 'f<character>',\n        type: 'motion',\n        motion: 'moveToCharacter',\n        motionArgs: { forward: true, inclusive: true }\n      }),\n      'vim-mode:find-backwards': b({\n        keys: 'F<character>',\n        type: 'motion',\n        motion: 'moveToCharacter',\n        motionArgs: { forward: false }\n      }),\n      'vim-mode:till': b({\n        keys: 't<character>',\n        type: 'motion',\n        motion: 'moveTillCharacter',\n        motionArgs: { forward: true, inclusive: true }\n      }),\n      'vim-mode:till-backwards': b({\n        keys: 'T<character>',\n        type: 'motion',\n        motion: 'moveTillCharacter',\n        motionArgs: { forward: false }\n      }),\n      'vim-mode:repeat-find': h({\n        keys: ';',\n        type: 'motion',\n        motion: 'repeatLastCharacterSearch',\n        motionArgs: { forward: true }\n      }),\n      'vim-mode:repeat-find-reverse': h({\n        keys: ',',\n        type: 'motion',\n        motion: 'repeatLastCharacterSearch',\n        motionArgs: { forward: false }\n      }),\n\n      'vim-mode:search': h({\n        keys: '/',\n        type: 'search',\n        searchArgs: { forward: true, querySrc: 'prompt', toJumplist: true }\n      }),\n      'vim-mode:reverse-search': h({\n        keys: '?',\n        type: 'search',\n        searchArgs: { forward: false, querySrc: 'prompt', toJumplist: true }\n      }),\n      'vim-mode:search-current-word': h({\n        keys: '*',\n        type: 'search',\n        searchArgs: {\n          forward: true,\n          querySrc: 'wordUnderCursor',\n          wholeWordOnly: true,\n          toJumplist: true\n        }\n      }),\n      'vim-mode:reverse-search-current-word': h({\n        keys: '#',\n        type: 'search',\n        searchArgs: {\n          forward: false,\n          querySrc: 'wordUnderCursor',\n          wholeWordOnly: true,\n          toJumplist: true\n        }\n      }),\n      'vim-mode:repeat-search': h({\n        keys: 'n',\n        type: 'motion',\n        motion: 'findNext',\n        motionArgs: { forward: true, toJumplist: true }\n      }),\n      'vim-mode:repeat-search-backwards': h({\n        keys: 'N',\n        type: 'motion',\n        motion: 'findNext',\n        motionArgs: { forward: false, toJumplist: true }\n      }),\n\n      'vim-mode:bracket-matching-motion': h({\n        keys: '%',\n        type: 'motion',\n        motion: 'moveToMatchedSymbol',\n        motionArgs: { inclusive: true, toJumplist: true }\n      }),\n\n      'vim-mode:ex-command': h({ keys: ':', type: 'ex' }),\n\n      // normal mode\n      'vim-mode:activate-insert-mode': h({\n        keys: 'i',\n        type: 'action',\n        action: 'enterInsertMode',\n        isEdit: true,\n        actionArgs: { insertAt: 'inplace' },\n        context: 'normal'\n      }),\n      'vim-mode:activate-replace-mode': h({\n        keys: 'R',\n        type: 'action',\n        action: 'enterInsertMode',\n        isEdit: true,\n        actionArgs: { replace: true }\n      }),\n      'vim-mode:activate-characterwise-visual-mode': h({\n        keys: 'v',\n        type: 'action',\n        action: 'toggleVisualMode'\n      }),\n      'vim-mode:activate-linewise-visual-mode': h({\n        keys: 'V',\n        type: 'action',\n        action: 'toggleVisualMode',\n        actionArgs: { linewise: true }\n      }),\n      'vim-mode:activate-blockwise-visual-mode': h({\n        keys: '<C-v>',\n        type: 'action',\n        action: 'toggleVisualMode',\n        actionArgs: { blockwise: true }\n      }),\n\n      'vim-mode:undo': h({\n        keys: 'u',\n        type: 'action',\n        action: 'undo',\n        context: 'normal'\n      }),\n\n      'vim-mode:insert-above-with-newline': h({\n        keys: 'O',\n        type: 'action',\n        action: 'newLineAndEnterInsertMode',\n        isEdit: true,\n        interlaceInsertRepeat: true,\n        actionArgs: { after: false },\n        context: 'normal'\n      }),\n      'vim-mode:insert-below-with-newline': h({\n        keys: 'o',\n        type: 'action',\n        action: 'newLineAndEnterInsertMode',\n        isEdit: true,\n        interlaceInsertRepeat: true,\n        actionArgs: { after: true },\n        context: 'normal'\n      }),\n      'vim-mode:insert-after': h({\n        keys: 'a',\n        type: 'action',\n        action: 'enterInsertMode',\n        isEdit: true,\n        actionArgs: { insertAt: 'charAfter' },\n        context: 'normal'\n      }),\n      'vim-mode:insert-after-end-of-line': h({\n        keys: 'A',\n        type: 'action',\n        action: 'enterInsertMode',\n        isEdit: true,\n        actionArgs: { insertAt: 'eol' },\n        context: 'normal'\n      }),\n      'vim-mode:delete-right': h({\n        keys: 'x',\n        type: 'operatorMotion',\n        operator: 'delete',\n        motion: 'moveByCharacters',\n        motionArgs: { forward: true },\n        operatorMotionArgs: { visualLine: false }\n      }),\n      'vim-mode:delete-left': h({\n        keys: 'X',\n        type: 'operatorMotion',\n        operator: 'delete',\n        motion: 'moveByCharacters',\n        motionArgs: { forward: false },\n        operatorMotionArgs: { visualLine: true }\n      }),\n      'vim-mode:substitute': h({\n        keys: 's',\n        type: 'keyToKey',\n        toKeys: 'cl',\n        context: 'normal'\n      }),\n      'vim-mode:substitute-visual': h({\n        keys: 's',\n        type: 'keyToKey',\n        toKeys: 'c',\n        context: 'visual'\n      }),\n      'vim-mode:repeat': h({\n        keys: '.',\n        type: 'action',\n        action: 'repeatLastEdit'\n      }),\n\n      'vim-mode:increase': h({\n        keys: '<C-a>',\n        type: 'action',\n        action: 'incrementNumberToken',\n        isEdit: true,\n        actionArgs: { increase: true, backtrack: false }\n      }),\n      'vim-mode:decrease': h({\n        keys: '<C-x>',\n        type: 'action',\n        action: 'incrementNumberToken',\n        isEdit: true,\n        actionArgs: { increase: false, backtrack: false }\n      }),\n\n      'vim-mode:register-prefix': b({\n        keys: '\"<character>',\n        type: 'action',\n        action: 'setRegister'\n      }),\n\n      // insert mode\n      'vim-mode:delete-to-beginning-of-word': h({\n        keys: '<C-w>',\n        type: 'operatorMotion',\n        operator: 'delete',\n        motion: 'moveByWords',\n        motionArgs: { forward: false, wordEnd: false },\n        context: 'insert'\n      }),\n\n      // visual mode\n      'vim-mode:insert-at-start-of-target': h({\n        keys: 'I',\n        type: 'action',\n        action: 'enterInsertMode',\n        isEdit: true,\n        actionArgs: { insertAt: 'startOfSelectedArea' },\n        context: 'visual'\n      }),\n      'vim-mode:insert-at-end-of-target': h({\n        keys: 'A',\n        type: 'action',\n        action: 'enterInsertMode',\n        isEdit: true,\n        actionArgs: { insertAt: 'endOfSelectedArea' },\n        context: 'visual'\n      }),\n      'vim-mode:reverse-selections': h({\n        keys: 'o',\n        type: 'motion',\n        motion: 'moveToOtherHighlightedEnd',\n        context: 'visual'\n      }),\n      'vim-mode:reverse-selections-at-same-line': h({\n        keys: 'O',\n        type: 'motion',\n        motion: 'moveToOtherHighlightedEnd',\n        motionArgs: { sameLine: true },\n        context: 'visual'\n      })\n    }\n    disposables.add(inkdrop.commands.add(wrapper, handlers))\n    wrapper.addEventListener('keydown', this.handleEditorKeyDown)\n    disposables.add(\n      new Disposable(() =>\n        wrapper.removeEventListener('keydown', this.handleEditorKeyDown)\n      )\n    )\n\n    this.disposables = disposables\n  }\n\n  registerExCommands() {\n    const el = this.getCodeMirror().getWrapperElement()\n    this.vim.defineEx('write', 'w', () => {\n      inkdrop.commands.dispatch(el, 'core:save-note')\n    })\n    this.vim.defineEx('next', 'n', () => {\n      inkdrop.commands.dispatch(el, 'core:open-next-note')\n    })\n    this.vim.defineEx('prev', '', () => {\n      inkdrop.commands.dispatch(el, 'core:open-prev-note')\n    })\n    this.vim.defineEx('preview', 'p', () => {\n      inkdrop.commands.dispatch(el, 'view:toggle-preview')\n    })\n    this.vim.defineEx('side-by-side', 'side', () => {\n      inkdrop.commands.dispatch(el, 'view:toggle-side-by-side')\n    })\n  }\n\n  getCodeMirror() {\n    return inkdrop.getActiveEditor().cm\n  }\n\n  yankClipboard() {\n    const state = this.vim.getVimGlobalState()\n    const text = clipboard.readText()\n    const linewise = text.indexOf('\\n') >= 0\n    state.registerController.pushText('0', 'yank', text, linewise, true)\n  }\n\n  handleEditorLoad = editor => {\n    this.activateMode(editor)\n  }\n\n  handleVimModeChange = (event, _opt) => {\n    logger.debug('vim mode changed:', event)\n    const { mode } = event\n    const cm = this.getCodeMirror()\n    cm.getWrapperElement().classList.remove('insert-mode')\n    cm.getWrapperElement().classList.remove('visual-mode')\n    cm.getWrapperElement().classList.remove('normal-mode')\n    cm.getWrapperElement().classList.remove('replace-mode')\n    switch (mode) {\n      case 'normal':\n        cm.getWrapperElement().classList.add('normal-mode')\n        break\n      case 'visual':\n        cm.getWrapperElement().classList.add('visual-mode')\n        break\n      case 'replace':\n        cm.getWrapperElement().classList.add('replace-mode')\n        break\n      case 'insert':\n        cm.getWrapperElement().classList.add('insert-mode')\n        break\n    }\n  }\n\n  handleEditorKeyDown = event => {\n    const keyName = event.key\n    const cm = this.getCodeMirror()\n    const vim = this.vim.maybeInitVimState(cm)\n    const isNumberic = keyName.match(/^\\d$/)\n\n    if (this.isBufferingKey()) {\n      logger.debug('handle key buffering:', keyName, event)\n      const keyBinding = inkdrop.keymaps.findKeyBindings({\n        keystrokes: keyName,\n        target: cm.getInputField()\n      })\n      const b = cm\n        .getInputField()\n        .webkitMatchesSelector(\n          '.CodeMirror.vim-mode:not(.insert-mode) textarea'\n        )\n      logger.debug('keybinding check:', keyBinding, b)\n\n      if (\n        keyName !== 'Ctrl' &&\n        keyName !== 'Alt' &&\n        keyName !== 'Shift' &&\n        keyName !== 'Meta'\n      ) {\n        const { inputState } = vim\n        const hasOperatorOrMotion = inputState.motion || inputState.operator\n        if (keyName.length === 1 && (!isNumberic || !hasOperatorOrMotion)) {\n          inputState.selectedCharacter = event.key\n          inputState.keyBuffer = ''\n\n          if (keyBinding.length === 0) {\n            const { pendingCommand } = this\n            this.stopBufferingKey()\n\n            if (typeof pendingCommand === 'function') {\n              pendingCommand(event)\n            }\n\n            event.stopPropagation()\n            event.preventDefault()\n          }\n        } else if (isNumberic) {\n          this.bufferKey(keyName)\n          vim.inputState.pushRepeatDigit(keyName)\n        }\n      }\n    } else if (!this.isInsertMode()) {\n      if (isNumberic) {\n        this.bufferKey(keyName)\n      } else {\n        // push key buffer to the repeat digit\n        const keys = vim.inputState.keyBuffer\n        vim.inputState.keyBuffer = ''\n        const keysMatcher = /^(\\d*)(.*)$/.exec(keys)\n        if (keysMatcher[1] && keysMatcher[1] !== '0') {\n          vim.inputState.pushRepeatDigit(keysMatcher[1])\n        }\n      }\n    }\n  }\n\n  handleFocusEditor = _event => {\n    this.yankClipboard()\n  }\n}\n\nmodule.exports = new Plugin()\n"],"file":"vim.js"}